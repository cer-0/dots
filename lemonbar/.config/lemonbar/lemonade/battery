#!/bin/sh
#
# script for exporting battery to lemonbar.

BAT0='/sys/class/power_supply/BAT0'
BAT1='/sys/class/power_supply/BAT1'


while true; do
    read -r sts < $BAT1/status

    case "$sts" in
        "Discharging")
            read -r cap1 < $BAT1/capacity
            read -r cap0 < $BAT0/capacity
            cap=$((cap1 + cap0))
            cap=$((cap / 2))
            var="%{F#98c379}♥%{F-} $cap"

            [ "$cap" -le 25 ] \
                && var="%{F#282c34}%{B#e06c75}$cap%{F-}%{B-}" ;;
        "Charging")
            var="%{F#e5c07b}♥%{F-} $cap" ;;
        "Unknown")
            var="%{F#5c6370}Ø%{F-}" ;;
        *)
            var='%{F#828997}✔%{F-}' ;;
    esac

	printf "%s\n" "bat $var"
	sleep 3
done

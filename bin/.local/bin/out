#!/bin/sh
#
# Shutdown, reboot, hibernate or suspend your device.
#
# Dependencies: wofi systemd
# Kevin's idea, not me.

selectn () {
    case $action in
        Shutdown)
            sleep $1
            shutdown now
            ;;
        Reboot)
            sleep $1
            reboot
            ;;
        Suspend)
            sleep $1
            systemctl suspend -i
            ;;
        Hibernate)
            sleep $1
            systemctl hibernate
            ;;
        Logout)
            sleep $1
            swaymsg exit
            ;;
    esac
}

action=$(echo -e "Shutdown\nReboot\nSuspend\nHibernate\nTimer\nLogout" | wofi -d -L 5 -i -p ":(")

if [ "$action" != "Timer" ]; then
    selectn 0
else
    timer=$(echo -e "5\n15\n30\n60" | wofi -show -dmenu -L 4 -i -p "Minutes:")
    action=$(echo -e "Shutdown\nReboot\nSuspend\nHibernate" | wofi -show -dmenu -L 4 -i)
    timer+="m"
    selectn $timer
fi
